name:                purview
version:             0.1.0.0
github:              "purview-framework/purview"
license:             BSD3
author:              "Ian Davidson"
maintainer:          "bontaq@gmail.com"
copyright:           "2022 Ian Davidson"

extra-source-files:
- README.md
- ChangeLog.md

# Metadata used when publishing your package
synopsis:            Build server rendered, interactive websites
category:            Library, Web

# To avoid duplicated efforts in documentation and dealing with the
# complications of embedding Haddock markup inside cabal files, it is
# common to point users to the README.md file.
description: |
  A framework for building server rendered, interactive websites.

  The main points:

  * It's server side rendered and uses websockets to communicate HTML updates and to receive events.

  * State can be broken up into small components.

  * The approach is to provide useful atoms, with the user building up a kind of AST.

  * Attributes flow down to concrete HTML, events bubble up to state handlers.

  It's inspired by Phoenix LiveView, React, Redux, and Redux-Sagas.

  For the full readme, please see https://github.com/purview-framework/purview/blob/main/README.md


dependencies:
- base                          >= 4.7 && < 5
- aeson                         >= 1.5.6 && < 2.1
- bytestring                    >= 0.10.12.0 && < 0.12
- text                          >= 1.2.4.1 && < 1.3
- stm                           >= 2.5.0 && < 2.6
- raw-strings-qq                >= 1.1 && < 1.2
- websockets                    >= 0.12.7 && < 0.13
- blaze-builder                 >= 0.4.2 && < 0.5
- http-types                    >= 0.12.3 && < 0.13

# - hspec #
# - QuickCheck #
# - time #

library:
  source-dirs: src
  exposed-modules:
    - Purview
  ghc-options:
    - -Wincomplete-patterns
  when:
  - condition: false
    other-modules:
      - ComponentSpec
      - DiffingSpec
      - TreeGenerator
      - EventHandlingSpec
      - PrepareTreeSpec
      - PurviewSpec
      - RenderingSpec
      - EventsSpec
      - Spec

# executables:
#   purview-exe:
#     main:                Counter.hs
#     source-dirs:         examples
#     buildable: false
#     ghc-options:
#     - -threaded
#     - -rtsopts
#     - -with-rtsopts=-N
#     dependencies:
#     - purview
#     - time                          >= 1.11.1 && < 1.12
#     - freer-simple                  >= 1.2.1 && < 1.3

benchmarks:
    purview-perf-test:
        main: Criterion.hs
        source-dirs: performance
        ghc-options:
        - -main-is Criterion
        dependencies:
        - purview
        - criterion                     >= 1.5.13 && < 1.6

tests:
  purview-test:
    main:                Spec.hs
    source-dirs:         src
    ghc-options:
    - -threaded
    - -rtsopts
    - -with-rtsopts=-N
    - -main-is Spec
    dependencies:
    - purview
    - QuickCheck                    >= 2.14.2 && < 2.15
    - hspec                         >= 2.7.10 && < 2.10
    - time                          >= 1.9.3 && < 1.12
    build-tools:
    - hspec-discover == 2.*
